.disc {
  width: 100%;
  height: 100%;
  max-width: 48px;
  max-height: 48px;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.3s ease;
}

/* モバイルでディスクサイズを80%に調整 */
@media (max-width: 640px) {
  .disc {
    width: 80%;
    height: 80%;
  }
}

.disc .top,
.disc .side,
.disc .bottom {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 50%;
}

/* 上面 */
.disc .top {
  transform: translateZ(6px);
  box-shadow: inset 0 2px 4px rgba(255, 255, 255, 0.3);
}

/* 側面（円柱の厚み） */
.disc .side {
  transform: translateZ(0px);
  filter: drop-shadow(0 0 0 2px currentColor);
}

/* 下面 */
.disc .bottom {
  transform: translateZ(-6px) rotateX(180deg);
  box-shadow: inset 0 -2px 4px rgba(0, 0, 0, 0.3);
}

/* 特殊駒用の3D表示 */
.imageFront,
.imageBack {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
}

.imageFront {
  transform: translateZ(3px);
}

.imageBack {
  transform: translateZ(-3px) rotateX(180deg);
}

/* モバイル向けにZ軸の厚みを調整 */
@media (max-width: 640px) {
  .imageFront {
    transform: translateZ(2px);
  }

  .imageBack {
    transform: translateZ(-2px) rotateX(180deg);
  }
}

.flatImage {
  width: 100%;
  height: 100%;
  object-fit: contain;
  filter: drop-shadow(2px 4px 6px rgba(0, 0, 0, 0.4))
    drop-shadow(0px 1px 2px rgba(255, 255, 255, 0.3));
}

/* モバイル向けにディスクのZ軸の厚みを調整 */
@media (max-width: 640px) {
  .disc .top {
    transform: translateZ(3px);
  }

  .disc .bottom {
    transform: translateZ(-3px) rotateX(180deg);
  }
}

/* 黒駒 */
.disc.black .top,
.disc.black .side,
.disc.black .bottom {
  background-color: #000;
  color: #000;
}

.disc.black .top {
  background: radial-gradient(circle at 30% 30%, #333, #000);
}

/* 白駒 */
.disc.white .top,
.disc.white .side,
.disc.white .bottom {
  background-color: #fff;
  color: #fff;
  border: 1px solid #d1d5db;
}

.disc.white .top {
  background: radial-gradient(circle at 30% 30%, #fff, #e5e7eb);
}

/* 特殊駒の影効果は削除（flatImageで統一的に設定） */

/* 特殊駒のフリップ時の画像回転 */
.disc.flipping[data-disc-type="cat"] .flatImage,
.disc.flipping[data-disc-type="butter"] .flatImage {
  animation: flatImageSpin360 1s ease-in-out forwards;
}

@keyframes flatImageSpin360 {
  0% {
    transform: rotateX(0deg);
  }
  50% {
    transform: rotateX(180deg);
  }
  100% {
    transform: rotateX(360deg);
  }
}

/* 猫駒の画像切り替えアニメーションは削除（バター駒と同じ挙動に） */

/* バター猫駒の連続回転 */
.disc.buttercatRotate .flatImage {
  animation: flatImageRotateWithDisc 2s linear infinite;
}

@keyframes flatImageRotateWithDisc {
  0% {
    transform: rotateX(0deg);
  }
  100% {
    transform: rotateX(360deg);
  }
}

/* バター猫駒（両面：黄色と小豆色のグラデーション） */
.disc.buttercat .top,
.disc.buttercat .side,
.disc.buttercat .bottom {
  background: linear-gradient(135deg, #fbbf24 0%, #991b1b 100%);
  color: #fbbf24;
  border: 1px solid #d97706;
}

.disc.buttercat .top {
  background: radial-gradient(circle at 30% 30%, #fde047, #fbbf24, #991b1b);
}

/* フリップアニメーション */
.disc.flipping {
  animation: flip 1s ease-in-out forwards;
}

@keyframes flip {
  0% {
    transform: rotateX(0deg);
  }
  50% {
    transform: rotateX(90deg) scale(0.8);
  }
  100% {
    transform: rotateX(180deg);
  }
}

/* 通常駒のフリップ：90度で色が変わる */
.disc.flipping[data-disc-type="normal"] .top,
.disc.flipping[data-disc-type="normal"] .side,
.disc.flipping[data-disc-type="normal"] .bottom {
  animation: colorChange 1s ease-in-out forwards;
}

/* 黒→白へのフリップ */
.disc.flipping[data-flipping-to="white"][data-disc-type="normal"] .top {
  animation: colorChangeToWhiteTop 1s ease-in-out forwards;
}

.disc.flipping[data-flipping-to="white"][data-disc-type="normal"] .side,
.disc.flipping[data-flipping-to="white"][data-disc-type="normal"] .bottom {
  animation: colorChangeToWhiteSide 1s ease-in-out forwards;
}

@keyframes colorChangeToWhiteTop {
  0%,
  50% {
    background: radial-gradient(circle at 30% 30%, #333, #000);
  }
  50.1%,
  100% {
    background: radial-gradient(circle at 30% 30%, #fff, #e5e7eb);
  }
}

@keyframes colorChangeToWhiteSide {
  0%,
  50% {
    background-color: #000;
    color: #000;
    border-color: transparent;
  }
  50.1%,
  100% {
    background-color: #fff;
    color: #fff;
    border: 1px solid #d1d5db;
  }
}

/* 白→黒へのフリップ */
.disc.flipping[data-flipping-to="black"][data-disc-type="normal"] .top {
  animation: colorChangeToBlackTop 1s ease-in-out forwards;
}

.disc.flipping[data-flipping-to="black"][data-disc-type="normal"] .side,
.disc.flipping[data-flipping-to="black"][data-disc-type="normal"] .bottom {
  animation: colorChangeToBlackSide 1s ease-in-out forwards;
}

@keyframes colorChangeToBlackTop {
  0%,
  50% {
    background: radial-gradient(circle at 30% 30%, #fff, #e5e7eb);
  }
  50.1%,
  100% {
    background: radial-gradient(circle at 30% 30%, #333, #000);
  }
}

@keyframes colorChangeToBlackSide {
  0%,
  50% {
    background-color: #fff;
    color: #fff;
    border: 1px solid #d1d5db;
  }
  50.1%,
  100% {
    background-color: #000;
    color: #000;
    border-color: transparent;
  }
}

/* 猫・バター駒の360度回転アニメーション（X軸回転・上下反転） */
.disc.flipping[data-disc-type="cat"],
.disc.flipping[data-disc-type="butter"] {
  animation: spin360X 1s ease-in-out forwards;
}

@keyframes spin360X {
  0% {
    transform: rotateX(0deg);
  }
  50% {
    transform: rotateX(180deg) scale(0.95);
  }
  100% {
    transform: rotateX(360deg);
  }
}

/* バター駒の色変更アニメーション（90度と270度で色が変わる） */
/* 黒駒の場合：黒→白→黒（90度で白、270度で黒に戻る） */
.disc.flipping[data-disc-type="butter"][data-flipping-to="black"] .top {
  animation: specialDiscBlackToWhiteToBlackTop 1s ease-in-out forwards;
}

.disc.flipping[data-disc-type="butter"][data-flipping-to="black"] .side,
.disc.flipping[data-disc-type="butter"][data-flipping-to="black"] .bottom {
  animation: specialDiscBlackToWhiteToBlackSide 1s ease-in-out forwards;
}

/* 白駒の場合：白→黒→白（90度で黒、270度で白に戻る） */
.disc.flipping[data-disc-type="butter"][data-flipping-to="white"] .top {
  animation: specialDiscWhiteToBlackToWhiteTop 1s ease-in-out forwards;
}

.disc.flipping[data-disc-type="butter"][data-flipping-to="white"] .side,
.disc.flipping[data-disc-type="butter"][data-flipping-to="white"] .bottom {
  animation: specialDiscWhiteToBlackToWhiteSide 1s ease-in-out forwards;
}

/* 黒→白→黒のアニメーション（90度=25%、270度=75%） */
@keyframes specialDiscBlackToWhiteToBlackTop {
  0%,
  25% {
    background: radial-gradient(circle at 30% 30%, #333, #000);
  }
  25.1%,
  75% {
    background: radial-gradient(circle at 30% 30%, #fff, #e5e7eb);
  }
  75.1%,
  100% {
    background: radial-gradient(circle at 30% 30%, #333, #000);
  }
}

@keyframes specialDiscBlackToWhiteToBlackSide {
  0%,
  25% {
    background-color: #000;
    color: #000;
    border-color: transparent;
  }
  25.1%,
  75% {
    background-color: #fff;
    color: #fff;
    border: 1px solid #d1d5db;
  }
  75.1%,
  100% {
    background-color: #000;
    color: #000;
    border-color: transparent;
  }
}

/* 白→黒→白のアニメーション（90度=25%、270度=75%） */
@keyframes specialDiscWhiteToBlackToWhiteTop {
  0%,
  25% {
    background: radial-gradient(circle at 30% 30%, #fff, #e5e7eb);
  }
  25.1%,
  75% {
    background: radial-gradient(circle at 30% 30%, #333, #000);
  }
  75.1%,
  100% {
    background: radial-gradient(circle at 30% 30%, #fff, #e5e7eb);
  }
}

@keyframes specialDiscWhiteToBlackToWhiteSide {
  0%,
  25% {
    background-color: #fff;
    color: #fff;
    border: 1px solid #d1d5db;
  }
  25.1%,
  75% {
    background-color: #000;
    color: #000;
    border-color: transparent;
  }
  75.1%,
  100% {
    background-color: #fff;
    color: #fff;
    border: 1px solid #d1d5db;
  }
}

/* バター猫駒の連続回転アニメーション（X軸・上下反転） */
.disc.buttercatRotate {
  animation: buttercatSpinX 2s linear infinite;
}

@keyframes buttercatSpinX {
  0% {
    transform: rotateX(0deg);
  }
  100% {
    transform: rotateX(360deg);
  }
}
